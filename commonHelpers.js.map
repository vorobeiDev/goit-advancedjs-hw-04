{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const renderHTMLElement = (node, content, position = 'beforeend') => {\n  node.insertAdjacentHTML(position, content);\n};\n\nconst removeInnerHTMLElement = (node) => {\n  node.innerHTML = '';\n};\n\nexport const renderSearchForm = (node) => {\n  const content = `\n    <form class=\"search-form\" id=\"search-form\">\n      <input\n        type=\"text\"\n        name=\"search\"\n        autocomplete=\"off\"\n        placeholder=\"Search images...\"\n      />\n      <button type=\"submit\" class=\"button\">Search</button>\n    </form>\n  `;\n\n  renderHTMLElement(node, content);\n};\n\nexport const renderGalleryWrapper = (node) => {\n  const content = `<div class=\"gallery\" id=\"gallery\"></div>`;\n\n  renderHTMLElement(node, content);\n};\n\nexport const renderGalleryItems = (node, images) => {\n  const content = images.map((image) => `\n    <div class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"gallery-item-info\">\n        <div>\n          <b>Likes</b>\n          ${image.likes}\n        </div>\n        <div>\n          <b>Views</b>\n          ${image.views}\n        </div>\n        <div>\n          <b>Comments</b>\n          ${image.comments}\n        </div>\n        <div>\n          <b>Downloads</b>\n          ${image.downloads}\n        </div>\n      </div>\n    </div>\n  `)\n  .join('');\n\n  renderHTMLElement(node, content);\n};\n\nexport const renderImages = (node, images) => {\n  renderGalleryItems(node, images);\n}\n\nexport const renderNewImages = (node, images) => {\n  removeInnerHTMLElement(node);\n\n  if (images && images.length) {\n    renderImages(node, images);\n  }\n};\n\nexport const renderLoader = (node) => {\n  const content = `\n    <div class=\"loader-wrapper hidden\">\n      <div class=\"loading \">Loading images, please wait...</div>\n      <span class=\"loader\"></span>\n    </div>\n  `;\n\n  renderHTMLElement(node, content);\n};\n\nexport const renderButton = (node) => {\n  const content = `\n    <button type=\"button\" class=\"button load-more hidden\">Load more</button>\n  `;\n\n  renderHTMLElement(node, content);\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '45273601-269fa7243c6da01438f09c62a';\n\nconst axiosInstance = axios.create({\n  baseURL: 'https://pixabay.com/api',\n  params: {\n    key: API_KEY,\n  },\n});\n\nexport const getImagesFromAPI = async (searchQuery, page = 1, per_page = 15) => {\n  try {\n    const { data } = await axiosInstance.get('', {\n      params: {\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        page,\n        per_page,\n      },\n    });\n    return {\n      images: data.hits,\n      total: data.totalHits,\n    };\n  } catch (error) {\n    iziToast.error({\n      icon: '',\n      iconText: '',\n      title: '❌ Error',\n      message: `Error while fetching images. Please try again! ${error}`,\n    });\n    return {\n      images: [],\n      total: 0,\n    };\n  }\n}","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport {\n  renderSearchForm,\n  renderNewImages,\n  renderGalleryWrapper,\n  renderLoader,\n  renderButton, renderImages,\n} from './js/render-functions.js';\nimport { getImagesFromAPI } from './js/pixabay-api.js';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\niziToast.settings({\n  timeout: 3000,\n});\n\nconst gallery = new SimpleLightbox('#gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst images = [];\nlet query = '';\nlet page = 1;\n\nconst searchResultsWarning = () => {\n  iziToast.warning({\n    icon: '',\n    iconText: '',\n    title: '⚠️ Warning',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nconst onSubmitSearchFormHandler = async (event, form) => {\n  event.preventDefault();\n  query = form.elements.search.value;\n  const loader = document.querySelector('.loader-wrapper');\n\n  if (query.trim() !== '') {\n    const galleryContainer = document.querySelector('#gallery');\n    loader.classList.remove('hidden');\n\n    const { images, total } = await getImagesFromAPI(query);\n\n    renderNewImages(galleryContainer, images);\n\n    if (images.length) {\n      gallery.refresh();\n      const button = document.querySelector('.load-more');\n      if (images.length >= total) {\n        searchResultsWarning();\n        button.classList.add('hidden');\n      } else {\n        button.classList.remove('hidden');\n      }\n    } else {\n      iziToast.error({\n        icon: '',\n        iconText: '',\n        title: '❌ Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } else {\n    iziToast.warning({\n      icon: '',\n      iconText: '',\n      title: '⚠️ Warning',\n      message: 'Please enter a search query!',\n    });\n  }\n\n  loader.classList.add('hidden');\n  form.reset();\n};\n\nconst onLoadImagesHandler = async (button) => {\n  const loader = document.querySelector('.loader-wrapper');\n  const galleryContainer = document.querySelector('#gallery');\n\n  button.classList.add('hidden');\n  loader.classList.remove('hidden');\n\n  const { images: newImages, total } = await getImagesFromAPI(query, page += 1);\n\n  if (images.length >= total) {\n    searchResultsWarning();\n  } else {\n    renderImages(galleryContainer, newImages);\n    images.push(...newImages);\n    gallery.refresh();\n    button.classList.remove('hidden');\n    const image = document.querySelector('.gallery-item');\n    if (image) {\n      const height = image.getBoundingClientRect().height;\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  loader.classList.add('hidden');\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const root = document.getElementById('root');\n\n  renderSearchForm(root);\n  renderGalleryWrapper(root);\n  renderLoader(root);\n  renderButton(root);\n\n  const form = document.querySelector('#search-form');\n\n  form.addEventListener('submit', async (event) => {\n    await onSubmitSearchFormHandler(event, form);\n  });\n\n  const button = document.querySelector('.load-more');\n\n  button.addEventListener('click', async () => {\n    await onLoadImagesHandler(button);\n  });\n});"],"names":["renderHTMLElement","node","content","position","removeInnerHTMLElement","renderSearchForm","renderGalleryWrapper","renderGalleryItems","images","image","renderImages","renderNewImages","renderLoader","renderButton","API_KEY","axiosInstance","axios","getImagesFromAPI","searchQuery","page","per_page","data","error","iziToast","gallery","SimpleLightbox","query","searchResultsWarning","onSubmitSearchFormHandler","event","form","loader","galleryContainer","total","button","onLoadImagesHandler","newImages","height","root"],"mappings":"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"}